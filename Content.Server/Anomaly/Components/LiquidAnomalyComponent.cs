using Content.Server.Anomaly.Effects;
using Content.Shared.Chemistry.Reagent;
using Robust.Shared.Audio;
using Robust.Shared.Serialization.TypeSerializers.Implementations.Custom.Prototype;
using Robust.Shared.Serialization.TypeSerializers.Implementations.Custom.Prototype.List;

namespace Content.Server.Anomaly.Components;





[RegisterComponent, Access(typeof(LiquidAnomalySystem))]
public sealed partial class LiquidAnomalyComponent : Component
{

    /// <summary>
    /// the total amount of reagent generated by the anomaly per pulse
    /// scales with Severity
    /// </summary>
    [DataField("maxSolutionGeneration"), ViewVariables(VVAccess.ReadWrite)]
    public float MaxSolutionGeneration = 100;
    /// <summary>
    /// the total amount of reagent generated by the anomaly in the supercritical phase
    /// </summary>
    [DataField("superCriticalSolutionGeneration"), ViewVariables(VVAccess.ReadWrite)]
    public float SuperCriticalSolutionGeneration = 1000;


    /// <summary>
    /// the maximum amount of injection of a substance into an entity per pulsation
    /// scales with Severity
    /// </summary>
    [DataField("maxSolutionInjection"), ViewVariables(VVAccess.ReadWrite)]
    public float MaxSolutionInjection = 15;
    /// <summary>
    /// the maximum amount of injection of a substance into an entity in the supercritical phase
    /// </summary>
    [DataField("superCriticalSolutionInjection"), ViewVariables(VVAccess.ReadWrite)]
    public float SuperCriticalSolutionInjection = 50;


    /// <summary>
    /// The maximum radius in which the anomaly injects reagents into the surrounding containers.
    /// </summary>
    [DataField("injectRadius"), ViewVariables(VVAccess.ReadWrite)]
    public float InjectRadius = 3;
    /// <summary>
    /// The maximum radius in which the anomaly injects reagents into the surrounding containers.
    /// </summary>
    [DataField("superCriticalinjectRadius"), ViewVariables(VVAccess.ReadWrite)]
    public float SuperCriticalInjectRadius = 25;


    /// <summary>
    /// Possible reagents for the anomaly.
    /// </summary>
    [DataField("possibleChemicals", required: true, customTypeSerializer: typeof(PrototypeIdListSerializer<ReagentPrototype>))]
    public List<string> PossibleChemicals = new();

    /// <summary>
    /// Increasing severity by the specified amount will cause a change of reagent.
    /// </summary>
    [DataField("reagentChangeStep"), ViewVariables(VVAccess.ReadOnly)]
    public float ReagentChangeStep = 0.1f;

    /// <summary>
    /// Noise made when glue applied.
    /// </summary>
    [DataField("changeSound")]
    public SoundSpecifier ChangeSound = new SoundPathSpecifier("/Audio/Effects/Chemistry/bubbles.ogg");

    /// <summary>
    /// The name of the reagent that the anomaly produces.
    /// </summary>
    [ViewVariables(VVAccess.ReadOnly)]
    [DataField("reagent", customTypeSerializer: typeof(PrototypeIdSerializer<ReagentPrototype>))]
    public string Reagent = "Water";
    /// <summary>
    /// The next threshold beyond which the anomaly will change its reagent.
    /// </summary>
    [DataField("nextChangeThreshold"), ViewVariables(VVAccess.ReadOnly)]
    public float NextChangeThreshold = 0.5f;
}
