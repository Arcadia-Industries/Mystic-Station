- type: entity
  id: CollideFloorTrap
  abstract: true
  placement:
    mode: SnapgridCenter
  components:
    - type: Sprite
      sprite: Tiles/Misc/floortrap.rsi
      state: floortrap
    - type: Fixtures
      fixtures:
        floortrap:
          shape:
            !type:PhysShapeAabb
            bounds: "-0.4,-0.4,0.4,0.4"
          hard: false
          mask:
            - ItemMask
          layer:
            - SlipLayer
    - type: Physics
    - type: Tag
      tags:
        - HideContextMenu

- type: entity
  parent: CollideFloorTrap
  id: CollideFloorTrapSpawn
  name: floor trap spawn
  abstract: true
  components:
    - type: Sprite
      sprite: Tiles/Misc/floortrap.rsi
      state: floortrapspawn

- type: entity
  id: MobSpawnFloorTrap
  name: mobspawner floor trap
  abstract: true
  components:
    - type: Transform
      anchored: True
    - type: InteractionOutline
    - type: Physics
      bodyType: Static
    - type: Sprite
      sprite: /Textures/Effects/teleport.rsi
      state: teleport
    - type: Fixtures
      fixtures:
        portalFixture:
          shape:
            !type:PhysShapeAabb
            bounds: "-0.25,-0.48,0.25,0.48"
          mask:
          - FullTileMask
          layer:
          - WallLayer
          hard: false

- type: entity
  parent: CollideFloorTrap
  id: FloorTrapExplosion
  name: explosion floor trap
  components:
    - type: TriggerOnCollide
      fixtureID: floortrap
    - type: ExplodeOnTrigger
    - type: Explosive
      explosionType: Default
      totalIntensity: 20.0
      intensitySlope: 5
      maxIntensity: 4
    - type: DeleteOnTrigger

- type: entity
  parent: CollideFloorTrap
  id: FloorTrapEMP
  name: EMP floor trap
  components:
    - type: TriggerOnCollide
      fixtureID: floortrap
    - type: EmpOnTrigger
      range: 2
      energyConsumption: 5000
    - type: DeleteOnTrigger

- type: entity
  parent: CollideFloorTrapSpawn
  id: SpawnFloorTrapCarp
  name: spawn floor trap
  suffix: Carp
  components:
    - type: TriggerOnCollide
      fixtureID: floortrap
    - type: SpawnOnTrigger
      proto: MobSpawnFloorTrapCarp
    - type: DeleteOnTrigger

- type: entity
  parent: MobSpawnFloorTrap
  id: MobSpawnFloorTrapCarp
  suffix: Carp
  components:
    - type: TimedDespawn
      lifetime: 1
    - type: SpawnOnDespawn
      prototype: MobCarp

- type: entity
  parent: CollideFloorTrapSpawn
  id: SpawnFloorTrapBear
  name: spawn floor trap
  suffix: Bear
  components:
    - type: TriggerOnCollide
      fixtureID: floortrap
    - type: SpawnOnTrigger
      proto: MobSpawnFloorTrapBear
    - type: DeleteOnTrigger

- type: entity
  parent: MobSpawnFloorTrap
  id: MobSpawnFloorTrapBear
  suffix: Bear
  components:
    - type: TimedDespawn
      lifetime: 1
    - type: SpawnOnDespawn
      prototype: MobBearSpace

- type: entity
  parent: CollideFloorTrapSpawn
  id: SpawnFloorTrapKangaroo
  name: spawn floor trap
  suffix: Kangaroo
  components:
    - type: TriggerOnCollide
      fixtureID: floortrap
    - type: SpawnOnTrigger
      proto: MobSpawnFloorTrapKangaroo
    - type: DeleteOnTrigger

- type: entity
  parent: MobSpawnFloorTrap
  id: MobSpawnFloorTrapKangaroo
  suffix: Kangaroo
  components:
    - type: TimedDespawn
      lifetime: 1
    - type: SpawnOnDespawn
      prototype: MobKangarooSpace

- type: entity
  parent: CollideFloorTrapSpawn
  id: SpawnFloorTrapXenoDrone
  name: spawn floor trap
  suffix: Xeno. Drone
  components:
    - type: TriggerOnCollide
      fixtureID: floortrap
    - type: SpawnOnTrigger
      proto: MobSpawnFloorTrapXenoDrone
    - type: DeleteOnTrigger

- type: entity
  parent: MobSpawnFloorTrap
  id: MobSpawnFloorTrapXenoDrone
  suffix: Xeno. Drone
  components:
    - type: TimedDespawn
      lifetime: 1
    - type: SpawnOnDespawn
      prototype: MobXenoDrone

- type: entity
  parent: CollideFloorTrapSpawn
  id: SpawnFloorTrapXenoBurrower
  name: spawn floor trap
  suffix: Xeno. Burrower
  components:
    - type: TriggerOnCollide
      fixtureID: floortrap
    - type: SpawnOnTrigger
      proto: MobSpawnFloorTrapXenoBurrower
    - type: DeleteOnTrigger

- type: entity
  parent: MobSpawnFloorTrap
  id: MobSpawnFloorTrapXenoBurrower
  suffix: Xeno. Burrower
  components:
    - type: TimedDespawn
      lifetime: 1
    - type: SpawnOnDespawn
      prototype: MobXeno
