- type: htnCompound
  id: IdleCompound
  desc: Picks a random location for the NPC to move to and idle.
  branches:
  # Continue waiting
  - tasks:
    - !type:HTNPrimitiveTask
      operator: !type:WaitOperator
        key: IdleTime

  # Pick a new spot and wait there.
  - tasks:
    - !type:HTNPrimitiveTask
      operator: !type:PickAccessibleOperator
        idleRangeKey: IdleRange
        key: MovementTarget

    - !type:HTNPrimitiveTask
      operator: !type:MoveToOperator
        key: MovementTarget
      preconditions:
      - !type:KeyExistsPrecondition
          key: MovementTarget
      onShutdown:
      - !type:ClearKeyEffect
          key: MovementTarget

    - !type:HTNPrimitiveTask
      operator: !type:RandomOperator
        key: IdleTime
        minKey: MinimumIdleTime
        maxKey: MaximumIdleTime

    - !type:HTNPrimitiveTask
      operator: !type:WaitOperator
        key: IdleTime
      onShutdown:
      - !type:ClearKeyEffect
        Key: IdleTime
