- type: constructionGraph
  id: StorageCanister
  start: start
  graph:
    - node: start
      edges:
        - to: needsMetal
          completed:
            - !type:SetAnchor
              value: false
            - !type:SnapToGrid
              southRotation: true
          steps:
            - material: Plasteel
              amount: 1
              doAfter: 3

    - node: needsMetal
      entity: StorageCanisterBroken
      edges:
        - to: needsWelding
          steps:
            - material: Plasteel
              amount: 1
              doAfter: 1
        - to: start
          completed:
            - !type:SpawnPrototype
              prototype: SheetPlasteel1
              amount: 1
            - !type:DeleteEntity
          steps:
            - tool: Welding
              doAfter: 4

    - node: needsWelding
      edges:
        - to: StorageCanister
          steps:
            - tool: Welding
              doAfter: 6
        - to: needsMetal
          completed:
            - !type:SpawnPrototype
              prototype: SheetPlasteel1
              amount: 1
            - !type:DumpCanister
          steps:
            - tool: Anchoring
              doAfter: 4

    - node: StorageCanister
      entity: StorageCanister
      edges:
        - to: needsWelding
          completed:
            - !type:SetAnchor
              value: false
          conditions:
            - !type:EntityAnchored
              anchored: false
          steps:
            - tool: Welding
              doAfter: 5
