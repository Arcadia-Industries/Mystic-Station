- type: entity
  abstract: true
  id: BaseAnomaly
  name: anomaly
  description: An impossible object. Should you be standing this close to it?
  components:
  - type: Anomaly
    pulseSound:
      collection: RadiationPulse
      params:
        volume: 5
    anomalyContactDamage:
      types:
        Radiation: 10
  - type: AmbientSound
    range: 5
    volume: -5
    sound:
      path: /Audio/Ambience/anomaly_drone.ogg
  - type: Transform
    anchored: false
  - type: Physics
    bodyType: Static
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.35
        density: 50
        mask:
        - MobMask
        layer:
        - MobLayer
  - type: Sprite
    noRot: true
    drawdepth: Effects #it needs to draw over stuff.
    sprite: Structures/Specific/anomaly.rsi
  - type: InteractionOutline
  - type: Clickable
  - type: Damageable
  - type: Appearance
  - type: AnimationPlayer
  - type: GuideHelp
    guides:
    - AnomalousResearch
  - type: EmitSoundOnSpawn
    sound:
      path: /Audio/Effects/teleport_arrival.ogg

- type: entity
  id: AnomalyPyroclastic
  parent: BaseAnomaly
  suffix: Pyroclastic
  components:
  - type: Sprite
    layers:
    - state: anom1
      map: ["enum.AnomalyVisualLayers.Base"]
    - state: anom1-pulse
      map: ["enum.AnomalyVisualLayers.Animated"]
      visible: false
  - type: PointLight
    radius: 2.0
    energy: 7.5
    color: "#fca3c0"
    castShadows: false
  - type: PyroclasticAnomaly
  - type: TempAffectingAnomaly
    tempChangePerSecond: 25
    hotspotExposeTemperature: 1000
  - type: GasProducerAnomaly
    releasedGas: 3
    releaseOnMaxSeverity: true
    spawnRadius: 3
    tileCount: 5
    tempChange: 550

- type: entity
  id: AnomalyGravity
  parent: BaseAnomaly
  suffix: Gravity
  components:
  - type: Sprite
    layers:
    - state: anom2
      map: ["enum.AnomalyVisualLayers.Base"]
    - state: anom2-pulse
      map: ["enum.AnomalyVisualLayers.Animated"]
      visible: false
  - type: PointLight
    radius: 5.0
    energy: 20
    color: "#1e070e"
    castShadows: false
  - type: GravityAnomaly
  - type: GravityWell
  - type: RadiationSource

- type: entity
  id: AnomalyElectricity
  parent: BaseAnomaly
  suffix: Electricity
  components:
  - type: Sprite
    layers:
    - state: anom3
      map: ["enum.AnomalyVisualLayers.Base"]
    - state: anom3-pulse
      map: ["enum.AnomalyVisualLayers.Animated"]
      visible: false
  - type: PointLight
    radius: 2.0
    energy: 5.0
    color: "#ffffaa"
    castShadows: false
  - type: ElectricityAnomaly
  - type: Electrified

- type: entity
  id: AnomalyFlesh
  parent: BaseAnomaly
  suffix: Flesh
  components:
  - type: Sprite
    layers:
    - state: anom5
      map: ["enum.AnomalyVisualLayers.Base"]
    - state: anom5-pulse
      map: ["enum.AnomalyVisualLayers.Animated"]
      visible: false
  - type: PointLight
    radius: 2.0
    energy: 7.5
    color: "#cb5b7e"
    castShadows: false
  - type: TileSpawnAnomaly
    floorTileId: FloorFlesh
  - type: EntitySpawnAnomaly
    superCriticalSpawn: FleshKudzu
    spawns:
    - MobFleshJared
    - MobFleshGolem
    - MobFleshClamp
    - MobFleshLover
    - FleshBlocker

- type: entity
  id: AnomalyBluespace
  parent: BaseAnomaly
  suffix: Bluespace
  components:
  - type: Sprite
    layers:
    - state: anom4
      map: ["enum.AnomalyVisualLayers.Base"]
    - state: anom4-pulse
      map: ["enum.AnomalyVisualLayers.Animated"]
      visible: false
  - type: PointLight
    radius: 2.0
    energy: 7.5
    color: "#00ccff"
    castShadows: false
  - type: BluespaceAnomaly
  - type: Portal
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.35
        density: 50
        mask:
        - MobMask
        layer:
        - MobLayer
      portalFixture:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.25,-0.48,0.25,0.48"
        mask:
        - FullTileMask
        layer:
        - WallLayer
        hard: false
  - type: Anomaly
    pulseSound:
      collection: RadiationPulse
      params:
        volume: 5
    anomalyContactDamage:
      types:
        Radiation: 10


- type: entity
  id: AnomalyIce
  parent: BaseAnomaly
  suffix: Ice
  components:
  - type: Sprite
    sprite: Structures/Specific/Anomalies/ice_anom.rsi
    layers:
    - state: anom
      map: ["enum.AnomalyVisualLayers.Base"]
    - state: pulse
      map: ["enum.AnomalyVisualLayers.Animated"]
      visible: false
  - type: PointLight
    radius: 2.0
    energy: 2.5
    color: "#befaff"
    castShadows: false
  - type: Anomaly
    anomalyContactDamage:
      types:
        Cold: 10
  - type: ExplosionAnomaly
    supercriticalExplosion: Cryo
    explosionTotalIntensity: 300
    explosionDropoff: 2
    explosionMaxTileIntensity: 20
  - type: ProjectileAnomaly
    projectilePrototype: ProjectileIcicle
    targetNonSentientChance: 0.1
  - type: TempAffectingAnomaly
    tempChangePerSecond: -25
    hotspotExposeTemperature: -1000
  - type: GasProducerAnomaly
    releasedGas: 8 # Frezon. Please replace if there is a better way to specify this
    releaseOnMaxSeverity: true
    spawnRadius: 0

- type: entity
  id: AnomalyLiquid
  parent: BaseAnomaly
  suffix: Liquid
  components:
  - type: Sprite
    sprite: Structures/Specific/Anomalies/liquid_anom.rsi
    layers:
    - state: anom
      map: ["enum.AnomalyVisualLayers.Base"]
    - state: pulse
      map: ["enum.AnomalyVisualLayers.Animated"]
      visible: false
  - type: Anomaly
    anomalyContactDamage:
      types:
        Slash: 10
  - type: PointLight
    radius: 4.0
    energy: 8.5
    color: "#bbbbbb"
  - type: Fixtures
    fixtures:
      fix1:
        density: 20
        mask:
          - None
        layer:
          - Opaque
  - type: ExplosionAnomaly
    supercriticalExplosion: Default
    explosionTotalIntensity: 50
    explosionDropoff: 2
    explosionMaxTileIntensity: 10
  - type: EntitySpawnAnomaly
    superCriticalSpawn: RandomLiquidElementalSpawner
    spawns:
      - PuddleSparkle
  - type: ChasingAnomaly
    chasingComponent: InjectableSolution
  - type: LiquidAnomaly
    blacklistChemicals: 
    # With a limit of 15u injections are too strong
    - Romerol           
    - Bungotoxin
    - Lead
    - VentCrud
    - Lexorin
    # OP Medical        
    - AmbuzolPlus
    - Siderlac
    - Stimulants
    #Food - Group Blacklist (and move all food into groud)
    - Flour             
    - Cornmeal 
    - Oats
    - Enzyme
    - Blackpepper
    - Vinegar
    - Rice
    - CocoaPowder 
    - Butter
    - Nutriment 
    - Sugar 
    - Astrotame
    - BbqSauce
    - Cornoil
    - Frostoil
    - HorseradishSauce
    - Hotsauce
    - Ketchup
    - Ketchunaise
    - Mayo
    - Mustard
    - Vinaigrette
    - Soysauce
    - TableSalt
    # Drinks To Do - Group Blacklist (and move all drinks into groud)
    - Absinthe
    - Ale
    - Beer
    - BlueCuracao
    - Cognac
    - DeadRum
    - Ethanol
    - Gin
    - CoffeeLiqueur
    - MelonLiquor
    - NTCahors
    - PoisonWine
    - Rum
    - Sake
    - Tequila
    - Vermouth
    - Vodka
    - Whiskey
    - Champagne
    - AcidSpit
    - AlliesCocktail
    - Aloe
    - Amasec
    - Andalusia
    - Antifreeze
    - AtomicBomb
    - B52
    - BahamaMama
    - BananaHonk
    - Barefoot
    - BeepskySmash
    - BlackRussian
    - BloodyMary
    - Booger
    - BraveBull
    - CubaLibre
    - DemonsBlood
    - DevilsKiss
    - DoctorsDelight
    - DriestMartini
    - ErikaSurprise
    - GargleBlaster
    - GinFizz
    - GinTonic
    - Goldschlager
    - Grog
    - HippiesDelight
    - Hooch
    - IcedBeer
    - IrishCarBomb
    - IrishCream
    - IrishCoffee
    - LongIslandIcedTea
    - Manhattan
    - ManhattanProject
    - ManlyDorf
    - Margarita
    - Martini
    - Mead
    - Mojito
    - Moonshine
    - Patron
    - RedMead
    - Sbiten
    - ScrewdriverCocktail
    - CogChamp
    - Silencer
    - Singulo
    - SnowWhite
    - SuiDream
    - SyndicateBomb
    - TequilaSunrise
    - ThreeMileIsland
    - ToxinsSpecial
    - VodkaMartini
    - VodkaTonic
    - WhiskeyCola
    - WhiskeySoda
    - WhiteRussian
    - Coffee
    - Cream
    - CafeLatte
    - GreenTea
    - Grenadine
    - IcedCoffee
    - IcedGreenTea
    - IcedTea
    - JuiceBerryPoison
    - Lemonade
    - Milk
    - MilkGoat
    - MilkSoy
    - MilkSpoiled
    - Nothing
    - NuclearCola
    - SodaWater
    - SoyLatte
    - Tea
    - TonicWater
    - Water
    - Ice
    - DryRamen
    - HotRamen
    - Pilk
    - Posca
    - KiraSpecial
    - Rewriter
    - TheMartinez
    - WhiteGilgamesh
    - Cola
    - ChangelingSting
    - DrGibb
    - EnergyDrink
    - GrapeSoda
    - IceCream
    - LemonLime
    - PwrGame
    - RootBeer
    - RootBeerFloat
    - SpaceMountainWind
    - SpaceUp
    - Starkist
    - FourteenLoko
    - ShamblersJuice
    - BaseDrink
    - BaseAlcohol
    # Fun Category
    - Fiber             
    - GroundBee
    # Boring Botania
    - EZNutrient
    - Left4Zed
    - Ammonia
    - PlantBGone
    - WeedKiller
    - Diethylamine
    # Boring elemets
    - Aluminium         
    - Carbon
    - Chlorine
    - Copper
    - Fluorine
    - Gold
    - Hydrogen
    - Iodine
    - Iron
    - Lithium
    - Mercury
    - Phosphorus
    - Radium
    - Silicon
    - Silver
    - Sulfur
    - Sodium
    - Uranium
    - Zinc
    # Boring Chemicals
    - Acetone           
    - Phenol
    - Charcoal
    - Ash
    - ZombieBlood   # AmbusolPlus again
    - Ichor
    # Gases - Group Blacklist (and move all gases into groud)
    - Oxygen
    - Plasma
    - Tritium
    - CarbonDioxide
    - Nitrogen
    - Miasma
    - NitrousOxide
    - Frezon
  - type: Physics
    bodyType: KinematicController
    linearDamping: 0
  - type: MovementIgnoreGravity
    
- type: entity
  name: liquid elemental
  id: LiquidElementalWater
  suffix: Water
  parent: SimpleSpaceMobBase
  description: The revived deadly wave of liquid.
  components:
  - type: Insulated
  - type: CombatMode
  - type: InputMover
  - type: MobMover
  - type: Hands
  - type: NpcFactionMember
    factions:
    - SimpleHostile
  - type: HTN
    rootTask:
      task: SimpleHostileCompound
    blackboard:
      NavSmash: !type:Bool
        true
  - type: Sprite
    drawdepth: Mobs
    sprite: Mobs/Aliens/elemental.rsi
    layers:
      - map: [ "enum.DamageStateVisualLayers.Base" ]
        state: alive
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.40
        density: 80
        mask:
          - MobMask
        layer:
          - Opaque
  - type: MobState
    allowedStates:
    - Alive
    - Dead
  - type: MobThresholds
    thresholds:
      0: Alive
      100: Dead
  - type: SlowOnDamage
    speedModifierThresholds:
      50: 0.5
  - type: Stamina
    critThreshold: 300
  - type: Bloodstream
    bloodReagent: Water #To Do - replace with random
    bloodMaxVolume: 500
    bleedReductionAmount: 0.1
    bloodlossThreshold: 0.5
    bloodRefreshAmount: 0
  - type: MeleeWeapon
    altDisarm: false
    hidden: true
    angle: 0
    soundHit:
      collection: AlienClaw
    animation: WeaponArcBite
    damage:
      types:
        Slash: 10
        Poison: 5
  - type: DamageStateVisuals
    rotate: true
    states:
      Alive:
        Base: alive
      Dead:
        Base: dead
  - type: Tag
    tags:
      - CannotSuicide
  - type: PointLight
    radius: 2.0
    energy: 4.5
    color: "#75b1f0"
  - type: NoSlip
  - type: ZombieImmune
  
- type: entity
  id: LiquidElementalPolytrinicAcid
  suffix: PolytrinicAcid
  parent: LiquidElementalWater
  components:
  - type: PointLight
    color: "#a1000b"
  - type: Bloodstream
    bloodReagent: PolytrinicAcid

- type: entity
  id: LiquidElementalUnstableMutagen
  suffix: UnstableMutagen
  parent: LiquidElementalWater
  components:
  - type: PointLight
    color: "#00ff5f"
  - type: Bloodstream
    bloodReagent: UnstableMutagen

- type: entity
  id: LiquidElementalPax
  suffix: Pax
  parent: LiquidElementalWater
  components:
  - type: PointLight
    color: "#AAAAAA"
  - type: Bloodstream
    bloodReagent: Pax

- type: entity
  id: LiquidElementalTHCOil
  suffix: THCOil
  parent: LiquidElementalWater
  components:
  - type: PointLight
    color: "#DAA520"
  - type: Bloodstream
    bloodReagent: THCOil
    
- type: entity
  id: LiquidElementalNocturine
  suffix: Nocturine
  parent: LiquidElementalWater
  components:
  - type: PointLight
    color: "#128e80"
  - type: Bloodstream
    bloodReagent: Nocturine
    
- type: entity
  id: LiquidElementalMuteToxin
  suffix: MuteToxin
  parent: LiquidElementalWater
  components:
  - type: PointLight
    color: "#000000"
  - type: Bloodstream
    bloodReagent: MuteToxin    
    
- type: entity
  id: LiquidElementalBicaridine
  suffix: Bicaridine
  parent: LiquidElementalWater
  components:
  - type: PointLight
    color: "#000000"
  - type: Bloodstream
    bloodReagent: Bicaridine
    
- type: entity
  id: LiquidElementalPotassium
  suffix: Potassium
  parent: LiquidElementalWater
  components:
  - type: PointLight
    color: "#c6c8cc"
  - type: Bloodstream
    bloodReagent: Potassium
    
- type: entity
  id: LiquidElementalBlood
  suffix: Blood
  parent: LiquidElementalWater
  components:
  - type: PointLight
    color: "#800000"
  - type: Bloodstream
    bloodReagent: Blood


- type: entity
  id: RandomLiquidElementalSpawner
  name: random liquid elemental spawner
  parent: MarkerBase
  components:
  - type: Sprite
    layers:
    - state: red
    - sprite: Mobs/Aliens/elemental.rsi
      state: alive
  - type: RandomSpawner
    prototypes:
    - LiquidElementalWater
    - LiquidElementalPolytrinicAcid
    - LiquidElementalUnstableMutagen
    - LiquidElementalPax
    - LiquidElementalTHCOil
    - LiquidElementalNocturine
    - LiquidElementalMuteToxin
    - LiquidElementalBicaridine
    - LiquidElementalPotassium
    - LiquidElementalBlood
    chance: 1