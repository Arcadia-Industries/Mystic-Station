#brood
- type: entity
  name: brood
  parent: SimpleMobBase
  id: Broodmother
  description: Mega huge and mega scary spider!
  components:
  - type: Sprite
    drawdepth: Mobs
    layers:
    - map: ["enum.DamageStateVisualLayers.Base"]
      state: alive
      sprite: Mobs/Animals/quin.rsi
    scale: 1.2, 1.2
  - type: DamageStateVisuals
    states:
      Alive:
        Base: alive
      Critical:
        Base: dead
      Dead:
        Base: dead
  - type: PointLight
    radius: 8
    energy: 0.5
    softness: 0.5
    offset: "0, -1"
    color: "#ff0000"
    mask: /Textures/Effects/LightMasks/cone.png
    autoRot: true
  - type: MobThresholds
    thresholds:
      0: Alive
      1000: Dead
  - type: SlowOnDamage
    speedModifierThresholds:
      500: 0.7
      750: 0.8
  - type: GhostTakeoverAvailable
  - type: GhostRole
    name: A huge spider!
    description: Turn the station into your spider nest.
    rules: "Kill everyone who is against the creation of your nest."
  - type: MeleeWeapon
    hidden: true
    angle: 0
    animation: WeaponArcBite
    soundHit:
      path: /Audio/Effects/bite.ogg
    damage:
      types:
        Piercing: 35
        Poison: 12
  - type: Spider
    webActionName: BroodWebAction
  - type: EggLayer
    hungerUsage: 10
    eggLayCooldownMin: 9999999
    eggLayCooldownMax: 99999999
    eggSpawn:
    - id: BroodServantEgg
    eggLayAction: SpiderLayEgg
  - type: NoSlip
  - type: FasterSpiderWeb
  - type: Bloodstream
    bloodMaxVolume: 600
    bloodReagent: SpiderBlood
  - type: Butcherable
    spawned:
    - id: FoodMeatSpider
      amount: 12
  # - type: AmbientSound
  #   volume: -4
  #   range: 30
  #   enabled: true
  #   sound: 
  #     path: massacre.ogg
  - type: HTN
    rootTask: SimpleHostileCompound
  - type: Faction
    factions:
      - Xeno
  - type: InputMover
  - type: MobMover


#broodservant
- type: entity
  name: brood servant
  parent: SimpleMobBase
  id: BroodServant
  description: Mega small and mega scary spider!
  components:
  - type: Sprite
    drawdepth: Mobs
    sprite: Mobs/Animals/broodservant.rsi
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: mini
    scale: 0.7, 0.7
  - type: DamageStateVisuals
    states:
      Alive:
        Base: mini
      Dead:
        Base: mini_dead
  - type: MobThresholds
    thresholds:
      0: Alive
      100: Dead
  - type: SlowOnDamage
    speedModifierThresholds:
      500: 0.8
      750: 0.7
  - type: GhostTakeoverAvailable
  - type: GhostRole
    name: Little spider!
    description: Ready to poision!
    rules: "Protect your mother. Don't poison your mother."
  - type: MeleeWeapon
    hidden: true
    angle: 0
    animation: WeaponArcBite
    soundHit:
      path: /Audio/Effects/bite.ogg
    damage:
      types:
        Piercing: 6
        Poison: 12
  - type: Spider
    webActionName: BroodServantWebAction
  - type: NoSlip
  - type: FasterSpiderWeb


#broodwebaction
- type: instantAction
  id: BroodWebAction
  icon: Interface/Actions/web.png
  name: Brood's web
  description: Slow down your enemies.
  serverEvent: !type:SpiderWebActionEvent
  useDelay: 5
  priority: -5

#servantwebaction
- type: instantAction
  id: BroodServantWebAction
  icon: Interface/Actions/web.png
  name: Brood's web
  description: Slow down your enemies.
  serverEvent: !type:SpiderWebActionEvent
  useDelay: 20
  priority: -5


#broodegg
- type: entity
  id: BroodServantEgg
  parent: EggSpider
  name: spider egg
  description: It looks disgusting.
  components:
  - type: Sprite
    sprite: Mobs/Animals/spideregg.rsi
    scale: 1.2, 1.2
    layers:
      - state: egg
  - type: Damageable
    damageContainer: Inorganic
    damageModifierSet: Slime
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 50
      behaviors:
      - !type:DoActsBehavior
        acts: ["Destruction"]
  - type: PointLight
    radius: 5
    energy: 0.2
    softness: 0.5
    color: "#ff0000"
  - type: GhostTakeoverAvailable
  - type: GhostRole
    allowMovement: false
    allowSpeech: false
    makeSentient: true
    name: Spider egg
    description: Ready to hatch
    rules: "Grow into a full-fledged defender of the nest."
  - type: Polymorphable
    innatePolymorphs: [ EggToBroodServant ]
  - type: Actions


#polymorph egg
- type: polymorph
  id: EggToBroodServant
  entity: BroodServant
  forced: true
  transferDamage: false
  revertOnCrit: false
  revertOnDeath: false
  allowRepeatedMorphs: true
  delay: 3


#action egg
- type: instantAction
  id: SpiderLayEgg
  name: Lay a spider egg
  description: While your side is falling, you are destroying the throne.
  icon: { sprite: Mobs/Animals/spideregg.rsi, state: egg }
  useDelay: 20
  serverEvent: !type:EggLayInstantActionEvent
  priority: -4