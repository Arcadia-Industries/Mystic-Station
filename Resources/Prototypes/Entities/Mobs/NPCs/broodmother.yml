#brood
- type: entity
  name: brood
  parent: SimpleMobBase
  id: Broodmother
  description: Mega huge and mega scary spider!
  components:
  - type: Sprite
    drawdepth: Mobs
    layers:
    - map: ["enum.DamageStateVisualLayers.Base"]
      state: alive
      sprite: Mobs/Animals/quin.rsi
    scale: 1.2, 1.2
  - type: DamageStateVisuals
    states:
      Alive:
        Base: alive
      Dead:
        Base: dead
  - type: PointLight
    radius: 8
    energy: 0.5
    softness: 0.5
    offset: "0, -1"
    color: "#ff0000"
    mask: /Textures/Effects/LightMasks/cone.png
    autoRot: true
  - type: MobThresholds
    thresholds:
      0: Alive
      1000: Dead
  - type: SlowOnDamage
    speedModifierThresholds:
      250: 0.9
      500: 0.8
      920: 0.2
  - type: GhostTakeoverAvailable
  - type: GhostRole
    name: A huge spider!
    description: Turn the station into your spider nest.
    rules: "Kill everyone who is against the creation of your nest."
  - type: MeleeWeapon
    hidden: true
    angle: 0
    animation: WeaponArcBite
    soundHit:
      path: /Audio/Effects/bite.ogg
    damage:
      types:
        Piercing: 12
        Poison: 12
  - type: Spider
    webActionName: BroodWebAction
  - type: EggLayer
    hungerUsage: 0
    eggLayCooldownMin: 60
    eggLayCooldownMax: 60
    eggSpawn:
    - id: BroodServantEgg
    eggLayAction: SpiderLayEgg
  - type: NoSlip
  - type: Bloodstream
    bloodMaxVolume: 600
    bloodReagent: SpiderBlood
  - type: Butcherable
    spawned:
    - id: FoodMeatSpider
      amount: 12
  - type: HTN
    rootTask: SimpleHostileCompound
  - type: Faction
    factions:
    - Xeno
  - type: InputMover
  - type: MobMover
  - type: WebSpitStun
    actionWebSpit:
      icon: Objects/Weapons/Guns/Projectiles/web_projectile.rsi/web_projectile.png
      name: WebSpitStun
      description: WebSpitStun
      itemIconStyle: NoItem
      range: 200
      event: !type:SpiderWebSpitActionEvent
      useDelay: 60
  - type: FasterSpiderWeb


- type: entity
  id: BulletWebSpit
  name: web spit
  parent: BaseBulletTrigger
  noSpawn: true
  components:
    - type: Sprite
      sprite: Objects/Weapons/Guns/Projectiles/web_projectile.rsi
      layers:
        - state: web_projectile
    - type: Projectile
      damage:
        types:
          Caustic: 5
    - type: WebStun
      paralyzeTime: 5
      knockdownAmount: 5


- type: entity
  noSpawn: true
  name: BroodyTrap
  description: BroodyTrap
  id: BroodyTrap
  components:
  - type: Handcuff
    breakoutTime: 30
    uncuffTime: 10
    bodyIconState: body-overlay
    breakOnRemove: true
    brokenPrototype: WebCuffsBroken
    startCuffSound:
      path: /Audio/Items/Handcuffs/rope_start.ogg
    endCuffSound:
      path: /Audio/Items/Handcuffs/rope_end.ogg
    startUncuffSound:
      path: /Audio/Items/Handcuffs/rope_start.ogg
    endUncuffSound:
      path: /Audio/Items/Handcuffs/rope_breakout.ogg
    startBreakoutSound:
      path: /Audio/Items/Handcuffs/rope_takeoff.ogg
  - type: Sprite
    sprite: Objects/Misc/broodtrap.rsi
    state: cuff


#polymorph egg
- type: polymorph
  id: HumanToCocon
  entity: DudeInCocon
  forced: true
  transferDamage: true
  revertOnCrit: true
  revertOnDeath: true
  allowRepeatedMorphs: false
  delay: 3

#cocon
- type: entity
  name: ???
  description: Someone in cocon...
  id: DudeInCocon
  parent: MobHuman

#cocon
- type: entity
  noSpawn: true
  name: BroodCocon
  parent: ClothingOuterBase
  id: BroodCocon
  components:
  - type: Sprite
    sprite: Objects/Misc/broodtrap.rsi
    state: alive
  - type: Clothing
    slots:
    - outerClothing
    sprite: Objects/Misc/broodtrap.rsi
    state: alive
  - type: IngestionBlocker
  - type: AddAccentClothing
    accent: ReplacementAccent
    replacement: mumble
  - type: ClothingSpeedModifier
    walkModifier: 0.8
    sprintModifier: 0.8
  - type: Armor
    modifiers:
      coefficients:
        Blunt: 0.80
        Slash: 0.90
        Piercing: 0.95
        Heat: 1.25
  - type: NoSlip
  - type: Tag
    tags:
    - HidesHair
  - type: Unremoveable
    deleteOnDrop: true


#cocon
- type: entity
  noSpawn: true
  name: broken web cuffs
  description: The torn web
  id: WebCuffsBroken
  parent: BaseHandcuffsBroken
  components:
  - type: Sprite
    sprite: Objects/Misc/broodtrap.rsi
    state: cuff-broken
  - type: Tag
    tags:
    - Trash


#broodservant
- type: entity
  name: brood servant
  parent: SimpleMobBase
  id: BroodServant
  description: Mega small and mega scary spider!
  components:
  - type: Sprite
    drawdepth: Mobs
    sprite: Mobs/Animals/broodservant.rsi
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: mini
    scale: 0.7, 0.7
  - type: DamageStateVisuals
    states:
      Alive:
        Base: mini
      Dead:
        Base: mini_dead
  - type: MobThresholds
    thresholds:
      0: Alive
      100: Dead
  - type: SlowOnDamage
    speedModifierThresholds:
      20: 0.5
  - type: GhostTakeoverAvailable
  - type: GhostRole
    name: Little spider!
    description: Ready to poision!
    rules: "Protect your mother. Don't poison your mother."
  - type: MeleeWeapon
    hidden: true
    angle: 0
    animation: WeaponArcBite
    soundHit:
      path: /Audio/Effects/bite.ogg
    damage:
      types:
        Piercing: 2
        Poison: 6
  - type: Spider
    webActionName: BroodServantWebAction
  - type: NoSlip
  - type: FasterSpiderWeb


#broodwebaction
- type: instantAction
  id: BroodWebAction
  icon: Interface/Actions/web.png
  name: Brood's web
  description: Slow down your enemies.
  serverEvent: !type:SpiderWebActionEvent
  useDelay: 10
  priority: -5


#servantwebaction
- type: instantAction
  id: BroodServantWebAction
  icon: Interface/Actions/web.png
  name: Brood's web
  description: Slow down your enemies.
  serverEvent: !type:SpiderWebActionEvent
  useDelay: 20
  priority: -5


#broodegg
- type: entity
  id: BroodServantEgg
  parent: EggSpider
  name: spider egg
  description: It looks disgusting.
  components:
  - type: Sprite
    sprite: Mobs/Animals/spideregg.rsi
    scale: 1.2, 1.2
    layers:
      - state: egg
  - type: Damageable
    damageContainer: Inorganic
    damageModifierSet: Slime
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 50
      behaviors:
      - !type:DoActsBehavior
        acts: ["Destruction"]
  - type: PointLight
    radius: 5
    energy: 0.2
    softness: 0.5
    color: "#ff0000"
  - type: GhostTakeoverAvailable
  - type: GhostRole
    allowMovement: false
    allowSpeech: false
    makeSentient: true
    name: Spider egg
    description: Ready to hatch
    rules: "Grow into a full-fledged defender of the nest."
  - type: Polymorphable
    innatePolymorphs: [ EggToBroodServant ]
  - type: Actions


#polymorph egg
- type: polymorph
  id: EggToBroodServant
  entity: BroodServant
  forced: true
  transferDamage: false
  revertOnCrit: false
  revertOnDeath: false
  allowRepeatedMorphs: true
  delay: 3


#action egg
- type: instantAction
  id: SpiderLayEgg
  name: Lay a spider egg
  description: While your side is falling, you are destroying the throne.
  icon: { sprite: Mobs/Animals/spideregg.rsi, state: egg }
  useDelay: 60
  serverEvent: !type:EggLayInstantActionEvent
  priority: -4