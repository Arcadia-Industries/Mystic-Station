# Plate
# In the future, I (Swept) want a system for putting stuff on plates and it'll provide more nutrition
# If it's on that plate. I've modified all load/slices to fit on the plate, so all we need
# is that system. Ideally, food on plates would have a system where when thrown, it would
# break the plate and the loaf would fall off.

- type: entity
  parent: BaseItem
  id: FoodPlateBase
  components:
  - type: Sprite
    sprite: Objects/Consumable/Food/plates.rsi
    # draw below the food thats on the plate
    drawdepth: SmallObjects
  - type: Physics
    canCollide: true
  # fixture is required for item placer to work
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.3,-0.3,0.3,0.3"
        mask:
        - TabletopMachineMask
        layer:
        - Impassable
        - MidImpassable
        - LowImpassable
        hard: false
  - type: PlaceableSurface
    placeCentered: true
  - type: ItemPlacer
    maxEntities: 4
    whitelist:
      components:
      - Food
      - Drink
  - type: ItemParenter
  - type: Tag
    tags:
    - Trash
  - type: SpaceGarbage

# Large Plate

- type: entity
  parent: FoodPlateBase
  id: FoodPlate
  name: large plate
  description: A large plate, excellent for bread.
  components:
  - type: Sprite
    sprite: Objects/Consumable/Food/plates.rsi
    state: plate
  - type: DamageOnLand
    damage:
      types:
        Blunt: 5
  - type: DamageOtherOnHit
    damage:
      types:
        Blunt: 5
  - type: Damageable
    damageContainer: Inorganic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 5
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: GlassBreak
      - !type:SpawnEntitiesBehavior
        spawn:
          FoodPlateTrash:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: PhysicalComposition
    materialComposition:
      Glass: 60

- type: entity
  name: broken plate
  parent: BaseItem
  id: FoodPlateTrash
  description: A broken plate. Useless.
  components:
  - type: Sprite
    sprite: Objects/Consumable/Food/plates.rsi
    state: plate-trash
  - type: Tag
    tags:
    - Trash
  - type: SpaceGarbage

# Small Plate

- type: entity
  parent: FoodPlate
  id: FoodPlateSmall
  name: small plate
  description: A small plate. Delicate.
  components:
  - type: Sprite
    state: plate-small
# Needs the full thing because inherting is dumb sometimes.
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 5
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: GlassBreak
      - !type:SpawnEntitiesBehavior
        spawn:
          FoodPlateSmallTrash:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: PhysicalComposition
    materialComposition:
      Glass: 30

- type: entity
  parent: FoodPlateTrash
  id: FoodPlateSmallTrash
  components:
  - type: Sprite
    state: plate-small-trash

# Plastic Plate

- type: entity
  parent: FoodPlateBase
  id: FoodPlatePlastic
  name: plastic plate
  description: A large blue plastic plate, excellent for a birthday cake.
  components:
  - type: Sprite
    state: plate-plastic
  - type: PhysicalComposition
    materialComposition:
      Plastic: 60

- type: entity
  parent: FoodPlatePlastic
  id: FoodPlateSmallPlastic
  name: small plastic plate
  description: A blue plastic plate, excellent for slices of birthday cake.
  components:
  - type: Sprite
    state: plate-small-plastic
  - type: PhysicalComposition
    materialComposition:
      Plastic: 30

# Pie Tin

- type: entity
  parent: FoodPlateTrash
  id: FoodPlateTin
  name: pie tin
  description: A cheap foil tin for pies.
  components:
  - type: Sprite
    state: tin
  - type: PhysicalComposition
    materialComposition:
      Steel: 60
