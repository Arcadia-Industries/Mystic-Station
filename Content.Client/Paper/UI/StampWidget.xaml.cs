using Content.Shared.Paper;
using Robust.Client.AutoGenerated;
using Robust.Client.Graphics;
using Robust.Client.ResourceManagement;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.XAML;

namespace Content.Client.Paper.UI
{
    [GenerateTypedNameReferences]
    public sealed partial class StampWidget : PanelContainer
    {
        private StyleBoxTexture _borderTexture;

        public float Orientation {
            get { return StampedByLabel.Orientation; }
            set { StampedByLabel.Orientation = value; }
        }

        public StampInfo StampInfo {
            set {
                StampedByLabel.Text = Loc.GetString(value.StampName);
                StampedByLabel.FontColorOverride = value.StampColor;
                ModulateSelfOverride = value.StampColor;
            }
        }

        public StampWidget()
        {
            RobustXamlLoader.Load(this);
            var resCache = IoCManager.Resolve<IResourceCache>();
            var borderImage = resCache.GetResource<TextureResource>(
                    "/Textures/Interface/Paper/paper_stamp_border.svg.96dpi.png");
            _borderTexture = new StyleBoxTexture {
                Texture = borderImage,
            };
            _borderTexture.SetPatchMargin(StyleBoxTexture.Margin.All, 7.0f);
            PanelOverride = _borderTexture;
        }

        protected override void Draw(DrawingHandleScreen handle)
        {
            handle.SetTransform(GlobalPosition, Orientation, Vector2.One);
            base.Draw(handle);
        }
    }
}
