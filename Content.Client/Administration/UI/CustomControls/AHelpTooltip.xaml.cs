#nullable enable
using Content.Shared.Administration;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.XAML;

namespace Content.Client.Administration.UI.CustomControls;

[GenerateTypedNameReferences]
public partial class AHelpTooltip : PanelContainer
{
    public AHelpTooltip(PlayerInfo pinfo)
    {
        RobustXamlLoader.Load(this);

        CKey.Text = pinfo.Username;
        Status.Text = BwoinkWindow.StateSymbol(pinfo.Connected) + " " + pinfo.Connected.ToString();
        Ping.Text = string.Format("{0}ms", pinfo.Ping);
        Afk.Text = pinfo.Afk ? "YES" : "-";
        Disconnected.Text = pinfo.Disconnected is not null ?
            (pinfo.Disconnected.stamp.ToString() + " " + pinfo.Disconnected.reason)
            : "-";
        Roles.Text = string.Join(", ", pinfo.Roles);
        ICState.Text = (pinfo.DeadIC, pinfo.DeadPhysically) switch {
            (false, false) => "Alive",
            ( true, false) => "Dead (IC)",
            (false,  true) => "Dead (Physically)",
            ( true,  true) => "Dead (IC & Physically)",
        };
        MobState.Text = pinfo.MobState.ToString();
        DiedAt.Text = pinfo.TimeOfDeath?.ToString() ?? "-";
    }
}
