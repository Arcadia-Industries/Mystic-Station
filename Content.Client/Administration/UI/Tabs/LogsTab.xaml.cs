using System.Collections.Generic;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.XAML;
using Robust.Shared.GameObjects;
using Robust.Shared.IoC;

namespace Content.Client.Administration.UI.Tabs
{
    [GenerateTypedNameReferences]
    public partial class LogsTab : Control
    {
        private readonly AdminSystem _adminSystem;

        public LogsTab()
        {
            RobustXamlLoader.Load(this);
            _adminSystem = EntitySystem.Get<AdminSystem>();

            _adminSystem.LogsChanged += LogsChanged;
            LogsChanged(_adminSystem.Logs);
        }

        private void LogsChanged(List<string> logs)
        {
            Logs.RemoveAllChildren();

            foreach (var log in logs)
            {
                Logs.Children.Add(new Label
                {
                    Text = log
                });
            }
        }

        protected override void Dispose(bool disposing)
        {
            base.Dispose(disposing);

            _adminSystem.LogsChanged -= LogsChanged;
        }
    }
}
