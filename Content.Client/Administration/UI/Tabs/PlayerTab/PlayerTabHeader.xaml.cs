using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.XAML;

namespace Content.Client.Administration.UI.Tabs.PlayerTab;

[GenerateTypedNameReferences]
public sealed partial class PlayerTabHeader : ContainerButton
{
    public event Action<Headers>? OnHeaderClicked;

    public PlayerTabHeader()
    {
        RobustXamlLoader.Load(this);

        UsernameLabel.OnKeyBindDown += UsernameClicked;
        CharacterLabel.OnKeyBindDown += CharacterClicked;
        JobLabel.OnKeyBindDown += JobClicked;
        AntagonistLabel.OnKeyBindDown += AntagonistClicked;
    }

    private void UsernameClicked(GUIBoundKeyEventArgs args)
    {
        OnHeaderClicked?.Invoke(Headers.Username);
        args.Handle();
    }

    private void CharacterClicked(GUIBoundKeyEventArgs args)
    {
        OnHeaderClicked?.Invoke(Headers.Character);
        args.Handle();
    }

    private void JobClicked(GUIBoundKeyEventArgs args)
    {
        OnHeaderClicked?.Invoke(Headers.Job);
        args.Handle();
    }

    private void AntagonistClicked(GUIBoundKeyEventArgs args)
    {
        OnHeaderClicked?.Invoke(Headers.Antagonist);
        args.Handle();
    }

    protected override void Dispose(bool disposing)
    {
        base.Dispose(disposing);

        if (disposing)
        {
            UsernameLabel.OnKeyBindDown += UsernameClicked;
            CharacterLabel.OnKeyBindDown += CharacterClicked;
            JobLabel.OnKeyBindDown += JobClicked;
            AntagonistLabel.OnKeyBindDown += AntagonistClicked;
        }
    }

    public enum Headers
    {
        Username,
        Character,
        Job,
        Antagonist
    }
}
