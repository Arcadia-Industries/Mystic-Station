using System;
using Content.Shared.Devices;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.CustomControls;
using Robust.Client.UserInterface.XAML;
using Robust.Shared.Localization;

namespace Content.Client.Devices.UI
{
    [GenerateTypedNameReferences]
    public partial class SignalerWindow : SS14Window
    {
        public event Action? OnSendSignalPressed;
        public event Action<int>? OnFrequencyChanged;
        public SignalerWindow()
        {
            RobustXamlLoader.Load(this);

            SignalFrequency.IsValid = i => i is >= SharedSignalerComponent.MinFrequency and <= SharedSignalerComponent.MaxFrequency;
            SignalFrequency.InitDefaultButtons();

            SendSignalButton.OnPressed += _ => OnSendSignalPressed?.Invoke();
            SetFrequencyButton.OnPressed += _ => FrequencyChanged(SignalFrequency.Value);
        }

        private void FrequencyChanged(int value)
        {
            OnFrequencyChanged?.Invoke(value);
        }

        public void SetFrequency(int freq)
        {
            //override the value without calling ValueChanged.
            SignalFrequency.OverrideValue(freq);
        }

    }
}
