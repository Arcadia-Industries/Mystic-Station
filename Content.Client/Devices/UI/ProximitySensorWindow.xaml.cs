using System;
using Content.Shared.Devices;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.CustomControls;
using Robust.Client.UserInterface.XAML;
using Robust.Shared.Localization;

namespace Content.Client.Devices.UI
{
    [GenerateTypedNameReferences]
    public partial class ProximitySensorWindow : SS14Window
    {
        public event Action<int, int>? OnUpdateSensor;
        public event Action<bool>? OnActiveChanged;

        public ProximitySensorWindow()
        {
            RobustXamlLoader.Load(this);

            ProximityRange.MinValue = SharedProximitySensorComponent.MinRange;
            ProximityRange.MaxValue = SharedProximitySensorComponent.MaxRange;

            ProximityArmingTime.MinValue = SharedProximitySensorComponent.MinArmingTime;
            ProximityArmingTime.MaxValue = SharedProximitySensorComponent.MaxArmingTime;

            UpdateSensor.OnPressed += _ => OnUpdateSensor?.Invoke(ProximityRange.Value, ProximityArmingTime.Value);
            ProximityActive.OnToggled += args => OnActiveChanged?.Invoke(args.Pressed);
        }

        public void SetRange(int range)
        {
            ProximityRange.Value = range;
        }

        public void SetActive(bool active)
        {
            ProximityActive.Pressed = active;
        }

        public void SetArmingTime(int time)
        {
            ProximityArmingTime.Value = time;
        }

    }
}
