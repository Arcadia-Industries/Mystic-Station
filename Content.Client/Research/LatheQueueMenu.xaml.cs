using Content.Client.GameObjects.Components.Research;
using Content.Shared.Research;
using JetBrains.Annotations;
using Robust.Client.AutoGenerated;
using Robust.Client.Graphics;
using Robust.Client.UserInterface.CustomControls;
using Robust.Client.UserInterface.XAML;
using Robust.Client.Utility;
using Robust.Shared.Localization;

namespace Content.Client.Research
{
    [GenerateTypedNameReferences]
    [UsedImplicitly]
    public partial class LatheQueueMenu : SS14Window
    {
        public LatheBoundUserInterface Owner { get; set; }

        public LatheQueueMenu(LatheBoundUserInterface owner)
        {
            RobustXamlLoader.Load(this);

            Owner = owner;
            SetSize = MinSize = (300, 450);
            Title = Loc.GetString("ui-lathe-queue-title");

            ClearInfo();
        }

        public void SetInfo(LatheRecipePrototype recipe)
        {
            IconTexture.Texture = recipe.Icon.Frame0();
            NameLabel.Text = recipe.Name;
            DescriptionLabel.Text = recipe.Description;
        }

        public void ClearInfo()
        {
            IconTexture.Texture = Texture.Transparent;
            NameLabel.Text = Loc.GetString("ui-lathe-queue-empty-name");
            DescriptionLabel.Text = Loc.GetString("ui-lathe-queue-empty-desc");
        }

        public void PopulateList()
        {
            QueueItemList.Clear();
            var idx = 1;
            foreach (var recipe in Owner.QueuedRecipes)
            {
                var itemstr = Loc.GetString("ui-lathe-queue-item", ("number", idx), ("name", recipe.Name));
                QueueItemList.AddItem(itemstr, recipe.Icon.Frame0());
                idx++;
            }
        }
    }
}
