using System.Numerics;
using Content.Client.Computer;
using Content.Shared.Power;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.CustomControls;
using Robust.Client.UserInterface.XAML;

namespace Content.Client.Power.PowerMonitoring;

[GenerateTypedNameReferences]
public sealed partial class PowerMonitoringConsoleWindow : DefaultWindow, IComputerWindow<PowerMonitoringBoundInterfaceState>
{
    [Dependency] private readonly PowerMonitoringSystem _powerMonitoring = default!;

    public PowerMonitoringConsoleWindow()
    {
        RobustXamlLoader.Load(this);
        IoCManager.InjectDependencies(this);

        SetSize = MinSize = new Vector2(300, 450);

        MasterTabContainer.SetTabTitle(0, Loc.GetString("power-monitoring-window-tab-sources"));
        MasterTabContainer.SetTabTitle(1, Loc.GetString("power-monitoring-window-tab-loads"));
    }

    public void UpdateState(PowerMonitoringBoundInterfaceState state)
    {
        _powerMonitoring.UpdateSourcesList(SourcesList, state.Sources);
        _powerMonitoring.UpdateLoadsList(LoadsList, state.Loads, ShowInactiveConsumersCheckBox.Pressed);
    }
}


